---
date: "2021-05-31T15:20:47"
draft: False
url: /2299
source: "https://blognot.co/60780/"
---

Сегодня в США выходной, поэтому американских новостей будет немного. Но это даёт возможность для более вдумчивого чтения не новостных материалов. 

Например, для изучения выдержек из внутренней презентации Google на тему Android in China, которая стала доступной благодаря разбирательству Epic vs Apple. 

Представьте себе — Китай, самая крупная страна мира по населению, с прекрасным проникновением мобильных сервисов, которое при этом еще и растёт год от года, но в ней нет Google Play. Собственно, вообще нет сервисов Google. Android, разумеется, позволяет создание альтернативных магазинов приложений и свято место пустым не осталось. 

Всего в Китае насчитывается несколько сотен апсторов под Android, правда, действительно стоящими оказываются самые крупные 20. Они, как правило, делятся на принадлежащие крупным интернет-компаниям — например, WeChat, Alibaba, Baidu, Tencent, — и производителям смартфонов, как Huawei, Xiaomi, Oppo и так далее. И вот как на самом деле выглядит эта картина мечты.

У каждого магазина свои требования к разработчикам. Например, разный формат скриншотов и описаний, допустимых в магазине. 

При этом многие магазины собирают приложения из других магазинов. То есть опубликовав приложение, разработчик практически теряет контроль над его дистрибуцией.

Правда, магазины предоставляют возможность заявить свои права на существующие приложения — но это требует найти его, подать заявку, переподписать бинарник, например, — короче, тоже работа.

В итоге многие разработчики находят другой способ — они выкладывают приложение на собственном сайте и оставляют магазинам возможность его публиковать. 

Все эти магазины активно сражаются за пользователя и война идет с использованием всех доступных средств — например, производители смартфонов сплошь и рядом осложняют установку сторонних магазинов или приложений через сторонние магазины на смартфон. Фактически, такая установка равноценна установке APK-файла на обычный Android — вам надо согласиться с тем, что вы в здравом уме собираетесь установить небезопасный файл, сделав больше кликов, чем обычно.

Что остается делать разработчикам? Кроме хостинга своих приложений самостоятельно, они активно используют такие вещи, как массовое использование WebView и динамическую загрузку кода.

Но это еще не всё. Ведь чем ценен, например, iOS AppStore, кроме хостинга и распространения приложений? Сервисом нотификаций. И push нотификации поддерживаются каждым из китайских магазинов. И это еще одна война. 

Каждый из магазинов присылает свои нотификации — например, об обновлениях программ. Они сражаются за внимание пользователя. Как легко догадаться, производители смартфонов стремятся не пропустить такие нотификации конкурентов. Что делают конкуренты и крупные разработчики? Перестраивают систему уведомлений, держа в памяти резидентную программу, которая просто всегда находится в онлайне и ждет нотификаций. 

Что в ответ делают производители смартфонов? Предлагают пользователю включить режим оптимизации аккумулятора и регулярно очищают память, убивая все сервисы конкурентов. 

Которые в ответ применяют практику chain-starting — если пользователь запускает одну программу, использующие их SDK, она будит все остальные на этом же SDK и те опять готовы к приему уведомлений.

И, конечно же, все сторонние сторы теперь борятся еще и против WeChat, который все равно стоит у всех, при этом запустил Mini Apps, позволяющие разработчику сделать одно приложение с использованием Web API и избавиться от проблем. 

Короче, всё это выглядит как прекрасный материал для демонстрации сторонникам большого количества магазинов в iOS с явным укором «Вы что, хотите, как в Китае?»

Более полная версия — у меня в блоге, сюда она просто не влезла.
